<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Benchmarks • AMR (for R)</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<script src="../extra.js"></script><meta property="og:title" content="Benchmarks">
<meta property="og:description" content="">
<meta property="og:image" content="https://msberends.gitlab.io/AMR/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AMR (for R)</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Latest development version">1.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-question-circle"></span>
     
    How to
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/AMR.html">
        <span class="fa fa-directions"></span>
         
        Conduct AMR analysis
      </a>
    </li>
    <li>
      <a href="../articles/resistance_predict.html">
        <span class="fa fa-dice"></span>
         
        Predict antimicrobial resistance
      </a>
    </li>
    <li>
      <a href="../articles/PCA.html">
        <span class="fa fa-compress"></span>
         
        Conduct principal component analysis for AMR
      </a>
    </li>
    <li>
      <a href="../articles/MDR.html">
        <span class="fa fa-skull-crossbones"></span>
         
        Determine multi-drug resistance (MDR)
      </a>
    </li>
    <li>
      <a href="../articles/WHONET.html">
        <span class="fa fa-globe-americas"></span>
         
        Work with WHONET data
      </a>
    </li>
    <li>
      <a href="../articles/SPSS.html">
        <span class="fa fa-file-upload"></span>
         
        Import data from SPSS/SAS/Stata
      </a>
    </li>
    <li>
      <a href="../articles/EUCAST.html">
        <span class="fa fa-exchange-alt"></span>
         
        Apply EUCAST rules
      </a>
    </li>
    <li>
      <a href="../reference/mo_property.html">
        <span class="fa fa-bug"></span>
         
        Get properties of a microorganism
      </a>
    </li>
    <li>
      <a href="../reference/ab_property.html">
        <span class="fa fa-capsules"></span>
         
        Get properties of an antibiotic
      </a>
    </li>
    <li>
      <a href="../articles/benchmarks.html">
        <span class="fa fa-shipping-fast"></span>
         
        Other: benchmarks
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/">
    <span class="fa fa-book-open"></span>
     
    Manual
  </a>
</li>
<li>
  <a href="../authors.html">
    <span class="fa fa-users"></span>
     
    Authors
  </a>
</li>
<li>
  <a href="../news/">
    <span class="far fa far fa-newspaper"></span>
     
    Changelog
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://gitlab.com/msberends/AMR">
    <span class="fab fa fab fa-gitlab"></span>
     
    Source Code
  </a>
</li>
<li>
  <a href="../LICENSE-text.html">
    <span class="fa fa-book"></span>
     
    Licence
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Benchmarks</h1>
                        <h4 class="author">Matthijs S. Berends</h4>
            
            <h4 class="date">07 March 2020</h4>
      
      
      <div class="hidden name"><code>benchmarks.Rmd</code></div>

    </div>

    
    
<p>One of the most important features of this package is the complete microbial taxonomic database, supplied by the <a href="http://catalogueoflife.org">Catalogue of Life</a>. We created a function <code><a href="../reference/as.mo.html">as.mo()</a></code> that transforms any user input value to a valid microbial ID by using intelligent rules combined with the taxonomic tree of Catalogue of Life.</p>
<p>Using the <code>microbenchmark</code> package, we can review the calculation performance of this function. Its function <code><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark()</a></code> runs different input expressions independently of each other and measures their time-to-result.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(microbenchmark)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(AMR)</span></code></pre></div>
<p>In the next test, we try to ‘coerce’ different input values into the microbial code of <em>Staphylococcus aureus</em>. Coercion is a computational process of forcing output based on an input. For microorganism names, coercing user input to taxonomically valid microorganism names is crucial to ensure correct interpretation and to enable grouping based on taxonomic properties.</p>
<p>The actual result is the same every time: it returns its microorganism code <code>B_STPHY_AURS</code> (<em>B</em> stands for <em>Bacteria</em>, the taxonomic kingdom).</p>
<p>But the calculation time differs a lot:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>S.aureus &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span>(</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"sau"</span>), <span class="co"># WHONET code</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"stau"</span>),</span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"STAU"</span>),</span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"staaur"</span>),</span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"STAAUR"</span>),</span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"S. aureus"</span>),</span>
<span id="cb2-8"><a href="#cb2-8"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"S aureus"</span>),</span>
<span id="cb2-9"><a href="#cb2-9"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"Staphylococcus aureus"</span>), <span class="co"># official taxonomic name</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"Staphylococcus aureus (MRSA)"</span>), <span class="co"># additional text</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"Sthafilokkockus aaureuz"</span>), <span class="co"># incorrect spelling</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"MRSA"</span>), <span class="co"># Methicillin Resistant S. aureus</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"VISA"</span>), <span class="co"># Vancomycin Intermediate S. aureus</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"VRSA"</span>), <span class="co"># Vancomycin Resistant S. aureus</span></span>
<span id="cb2-15"><a href="#cb2-15"></a>  <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="dv">22242419</span>), <span class="co"># Catalogue of Life ID</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>  <span class="dt">times =</span> <span class="dv">10</span>)</span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(S.aureus, <span class="dt">unit =</span> <span class="st">"ms"</span>, <span class="dt">signif =</span> <span class="dv">2</span>)</span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co"># Unit: milliseconds</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">#                                   expr   min    lq  mean median    uq  max</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co">#                           as.mo("sau")   8.0   8.2   9.1    8.4   8.5   16</span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="co">#                          as.mo("stau")  37.0  40.0  51.0   52.0  60.0   76</span></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="co">#                          as.mo("STAU")  36.0  38.0  58.0   60.0  68.0  100</span></span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="co">#                        as.mo("staaur")   8.2   8.4   9.5    8.6   8.9   14</span></span>
<span id="cb2-24"><a href="#cb2-24"></a><span class="co">#                        as.mo("STAAUR")   8.2   8.3  15.0    9.2  14.0   53</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="co">#                     as.mo("S. aureus")  13.0  21.0  64.0   21.0  45.0  260</span></span>
<span id="cb2-26"><a href="#cb2-26"></a><span class="co">#                      as.mo("S aureus")  13.0  14.0  33.0   24.0  44.0   76</span></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="co">#         as.mo("Staphylococcus aureus")   4.7   4.8   9.9    6.8   7.9   42</span></span>
<span id="cb2-28"><a href="#cb2-28"></a><span class="co">#  as.mo("Staphylococcus aureus (MRSA)") 620.0 640.0 770.0  700.0 860.0 1100</span></span>
<span id="cb2-29"><a href="#cb2-29"></a><span class="co">#       as.mo("Sthafilokkockus aaureuz") 330.0 350.0 460.0  490.0 560.0  570</span></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="co">#                          as.mo("MRSA")   8.1   8.3  14.0   12.0  13.0   48</span></span>
<span id="cb2-31"><a href="#cb2-31"></a><span class="co">#                          as.mo("VISA")  24.0  25.0  34.0   26.0  38.0   59</span></span>
<span id="cb2-32"><a href="#cb2-32"></a><span class="co">#                          as.mo("VRSA")  23.0  24.0  37.0   27.0  39.0   78</span></span>
<span id="cb2-33"><a href="#cb2-33"></a><span class="co">#                        as.mo(22242419) 120.0 130.0 150.0  140.0 160.0  240</span></span>
<span id="cb2-34"><a href="#cb2-34"></a><span class="co">#  neval</span></span>
<span id="cb2-35"><a href="#cb2-35"></a><span class="co">#     10</span></span>
<span id="cb2-36"><a href="#cb2-36"></a><span class="co">#     10</span></span>
<span id="cb2-37"><a href="#cb2-37"></a><span class="co">#     10</span></span>
<span id="cb2-38"><a href="#cb2-38"></a><span class="co">#     10</span></span>
<span id="cb2-39"><a href="#cb2-39"></a><span class="co">#     10</span></span>
<span id="cb2-40"><a href="#cb2-40"></a><span class="co">#     10</span></span>
<span id="cb2-41"><a href="#cb2-41"></a><span class="co">#     10</span></span>
<span id="cb2-42"><a href="#cb2-42"></a><span class="co">#     10</span></span>
<span id="cb2-43"><a href="#cb2-43"></a><span class="co">#     10</span></span>
<span id="cb2-44"><a href="#cb2-44"></a><span class="co">#     10</span></span>
<span id="cb2-45"><a href="#cb2-45"></a><span class="co">#     10</span></span>
<span id="cb2-46"><a href="#cb2-46"></a><span class="co">#     10</span></span>
<span id="cb2-47"><a href="#cb2-47"></a><span class="co">#     10</span></span>
<span id="cb2-48"><a href="#cb2-48"></a><span class="co">#     10</span></span></code></pre></div>
<p><img src="benchmarks_files/figure-html/unnamed-chunk-4-1.png" width="562.5"></p>
<p>In the table above, all measurements are shown in milliseconds (thousands of seconds). A value of 5 milliseconds means it can determine 200 input values per second. It case of 100 milliseconds, this is only 10 input values per second.</p>
<p>To achieve this speed, the <code>as.mo</code> function also takes into account the prevalence of human pathogenic microorganisms. The downside of this is of course that less prevalent microorganisms will be determined less fast. See this example for the ID of <em>Methanosarcina semesiae</em> (<code>B_MTHNSR_SEMS</code>), a bug probably never found before in humans:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>M.semesiae &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span>(<span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"metsem"</span>),</span>
<span id="cb3-2"><a href="#cb3-2"></a>                             <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"METSEM"</span>),</span>
<span id="cb3-3"><a href="#cb3-3"></a>                             <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"M. semesiae"</span>),</span>
<span id="cb3-4"><a href="#cb3-4"></a>                             <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"M.  semesiae"</span>),</span>
<span id="cb3-5"><a href="#cb3-5"></a>                             <span class="kw"><a href="../reference/as.mo.html">as.mo</a></span>(<span class="st">"Methanosarcina semesiae"</span>),</span>
<span id="cb3-6"><a href="#cb3-6"></a>                             <span class="dt">times =</span> <span class="dv">10</span>)</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(M.semesiae, <span class="dt">unit =</span> <span class="st">"ms"</span>, <span class="dt">signif =</span> <span class="dv">4</span>)</span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co"># Unit: milliseconds</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#                              expr      min       lq     mean   median       uq</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#                   as.mo("metsem") 1349.000 1352.000 1597.000 1411.000 1983.000</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#                   as.mo("METSEM") 1316.000 2146.000 2069.000 2226.000 2245.000</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#              as.mo("M. semesiae")   13.330   14.110   32.960   21.840   53.090</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#             as.mo("M.  semesiae")   13.730   20.960   29.720   21.430   40.000</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#  as.mo("Methanosarcina semesiae")    4.802    5.171    6.667    6.551    8.036</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">#       max neval</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#  2184.000    10</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">#  2337.000    10</span></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co">#    62.780    10</span></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="co">#    64.510    10</span></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="co">#     8.735    10</span></span></code></pre></div>
<p>That takes 6.1 times as much time on average. We can conclude that looking up arbitrary codes of less prevalent microorganisms is the worst way to go, in terms of calculation performance. Full names (like <em>Methanosarcina semesiae</em>) are always very fast and only take some thousands of seconds to coerce - they are the most probable input from most data sets.</p>
<p>In the figure below, we compare <em>Escherichia coli</em> (which is very common) with <em>Prevotella brevis</em> (which is moderately common) and with <em>Methanosarcina semesiae</em> (which is uncommon):</p>
<p><img src="benchmarks_files/figure-html/unnamed-chunk-6-1.png" width="900"></p>
<p>Uncommon microorganisms take a lot more time than common microorganisms. To relieve this pitfall and further improve performance, two important calculations take almost no time at all: <strong>repetitive results</strong> and <strong>already precalculated results</strong>.</p>
<div id="repetitive-results" class="section level3">
<h3 class="hasAnchor">
<a href="#repetitive-results" class="anchor"></a>Repetitive results</h3>
<p>Repetitive results are unique values that are present more than once. Unique values will only be calculated once by <code><a href="../reference/as.mo.html">as.mo()</a></code>. We will use <code><a href="../reference/mo_property.html">mo_name()</a></code> for this test - a helper function that returns the full microbial name (genus, species and possibly subspecies) which uses <code><a href="../reference/as.mo.html">as.mo()</a></code> internally.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co"># take all MO codes from the example_isolates data set</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>x &lt;-<span class="st"> </span>example_isolates<span class="op">$</span>mo <span class="op">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="st">  </span><span class="co"># keep only the unique ones</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>() <span class="op">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="st">  </span><span class="co"># pick 50 of them at random</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/sample.html">sample</a></span>(<span class="dv">50</span>) <span class="op">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="st">  </span><span class="co"># paste that 10,000 times</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">10000</span>) <span class="op">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="st">  </span><span class="co"># scramble it</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/sample.html">sample</a></span>()</span>
<span id="cb4-12"><a href="#cb4-12"></a>  </span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co"># got indeed 50 times 10,000 = half a million?</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(x)</span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co"># [1] 500000</span></span>
<span id="cb4-16"><a href="#cb4-16"></a></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co"># and how many unique values do we have?</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="kw"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span>(x)</span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co"># [1] 50</span></span>
<span id="cb4-20"><a href="#cb4-20"></a></span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="co"># now let's see:</span></span>
<span id="cb4-22"><a href="#cb4-22"></a>run_it &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span>(<span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(x),</span>
<span id="cb4-23"><a href="#cb4-23"></a>                         <span class="dt">times =</span> <span class="dv">100</span>)</span>
<span id="cb4-24"><a href="#cb4-24"></a><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(run_it, <span class="dt">unit =</span> <span class="st">"ms"</span>, <span class="dt">signif =</span> <span class="dv">3</span>)</span>
<span id="cb4-25"><a href="#cb4-25"></a><span class="co"># Unit: milliseconds</span></span>
<span id="cb4-26"><a href="#cb4-26"></a><span class="co">#        expr min  lq mean median  uq  max neval</span></span>
<span id="cb4-27"><a href="#cb4-27"></a><span class="co">#  mo_name(x) 564 605  673    630 657 1100   100</span></span></code></pre></div>
<p>So transforming 500,000 values (!!) of 50 unique values only takes 0.63 seconds (630 ms). You only lose time on your unique input values.</p>
</div>
<div id="precalculated-results" class="section level3">
<h3 class="hasAnchor">
<a href="#precalculated-results" class="anchor"></a>Precalculated results</h3>
<p>What about precalculated results? If the input is an already precalculated result of a helper function like <code><a href="../reference/mo_property.html">mo_name()</a></code>, it almost doesn’t take any time at all (see ‘C’ below):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>run_it &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span>(<span class="dt">A =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"B_STPHY_AURS"</span>),</span>
<span id="cb5-2"><a href="#cb5-2"></a>                         <span class="dt">B =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"S. aureus"</span>),</span>
<span id="cb5-3"><a href="#cb5-3"></a>                         <span class="dt">C =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"Staphylococcus aureus"</span>),</span>
<span id="cb5-4"><a href="#cb5-4"></a>                         <span class="dt">times =</span> <span class="dv">10</span>)</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(run_it, <span class="dt">unit =</span> <span class="st">"ms"</span>, <span class="dt">signif =</span> <span class="dv">3</span>)</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co"># Unit: milliseconds</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#  expr   min     lq   mean median     uq   max neval</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#     A  6.58  6.590  7.340  6.630  6.780 13.00    10</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#     B 13.50 13.700 18.700 13.900 14.600 60.80    10</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#     C  0.72  0.863  0.917  0.898  0.935  1.26    10</span></span></code></pre></div>
<p>So going from <code><a href="../reference/mo_property.html">mo_name("Staphylococcus aureus")</a></code> to <code>"Staphylococcus aureus"</code> takes 0.0009 seconds - it doesn’t even start calculating <em>if the result would be the same as the expected resulting value</em>. That goes for all helper functions:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>run_it &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span>(<span class="dt">A =</span> <span class="kw"><a href="../reference/mo_property.html">mo_species</a></span>(<span class="st">"aureus"</span>),</span>
<span id="cb6-2"><a href="#cb6-2"></a>                         <span class="dt">B =</span> <span class="kw"><a href="../reference/mo_property.html">mo_genus</a></span>(<span class="st">"Staphylococcus"</span>),</span>
<span id="cb6-3"><a href="#cb6-3"></a>                         <span class="dt">C =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"Staphylococcus aureus"</span>),</span>
<span id="cb6-4"><a href="#cb6-4"></a>                         <span class="dt">D =</span> <span class="kw"><a href="../reference/mo_property.html">mo_family</a></span>(<span class="st">"Staphylococcaceae"</span>),</span>
<span id="cb6-5"><a href="#cb6-5"></a>                         <span class="dt">E =</span> <span class="kw"><a href="../reference/mo_property.html">mo_order</a></span>(<span class="st">"Bacillales"</span>),</span>
<span id="cb6-6"><a href="#cb6-6"></a>                         <span class="dt">F =</span> <span class="kw"><a href="../reference/mo_property.html">mo_class</a></span>(<span class="st">"Bacilli"</span>),</span>
<span id="cb6-7"><a href="#cb6-7"></a>                         <span class="dt">G =</span> <span class="kw"><a href="../reference/mo_property.html">mo_phylum</a></span>(<span class="st">"Firmicutes"</span>),</span>
<span id="cb6-8"><a href="#cb6-8"></a>                         <span class="dt">H =</span> <span class="kw"><a href="../reference/mo_property.html">mo_kingdom</a></span>(<span class="st">"Bacteria"</span>),</span>
<span id="cb6-9"><a href="#cb6-9"></a>                         <span class="dt">times =</span> <span class="dv">10</span>)</span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(run_it, <span class="dt">unit =</span> <span class="st">"ms"</span>, <span class="dt">signif =</span> <span class="dv">3</span>)</span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co"># Unit: milliseconds</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#  expr   min    lq  mean median    uq   max neval</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#     A 0.499 0.511 0.516  0.517 0.522 0.544    10</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#     B 0.532 0.539 0.550  0.542 0.563 0.592    10</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#     C 0.718 0.787 0.832  0.843 0.889 0.904    10</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">#     D 0.538 0.548 0.566  0.567 0.571 0.607    10</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co">#     E 0.503 0.509 0.515  0.513 0.516 0.549    10</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="co">#     F 0.502 0.504 0.514  0.511 0.519 0.539    10</span></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="co">#     G 0.493 0.513 0.538  0.514 0.536 0.684    10</span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="co">#     H 0.499 0.501 0.509  0.505 0.516 0.531    10</span></span></code></pre></div>
<p>Of course, when running <code><a href="../reference/mo_property.html">mo_phylum("Firmicutes")</a></code> the function has zero knowledge about the actual microorganism, namely <em>S. aureus</em>. But since the result would be <code>"Firmicutes"</code> anyway, there is no point in calculating the result. And because this package ‘knows’ all phyla of all known bacteria (according to the Catalogue of Life), it can just return the initial value immediately.</p>
</div>
<div id="results-in-other-languages" class="section level3">
<h3 class="hasAnchor">
<a href="#results-in-other-languages" class="anchor"></a>Results in other languages</h3>
<p>When the system language is non-English and supported by this <code>AMR</code> package, some functions will have a translated result. This almost does’t take extra time:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"CoNS"</span>, <span class="dt">language =</span> <span class="st">"en"</span>) <span class="co"># or just mo_name("CoNS") on an English system</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co"># [1] "Coagulase-negative Staphylococcus (CoNS)"</span></span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"CoNS"</span>, <span class="dt">language =</span> <span class="st">"es"</span>) <span class="co"># or just mo_name("CoNS") on a Spanish system</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co"># [1] "Staphylococcus coagulasa negativo (SCN)"</span></span>
<span id="cb7-6"><a href="#cb7-6"></a></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"CoNS"</span>, <span class="dt">language =</span> <span class="st">"nl"</span>) <span class="co"># or just mo_name("CoNS") on a Dutch system</span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co"># [1] "Coagulase-negatieve Staphylococcus (CNS)"</span></span>
<span id="cb7-9"><a href="#cb7-9"></a></span>
<span id="cb7-10"><a href="#cb7-10"></a>run_it &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span>(<span class="dt">en =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"CoNS"</span>, <span class="dt">language =</span> <span class="st">"en"</span>),</span>
<span id="cb7-11"><a href="#cb7-11"></a>                         <span class="dt">de =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"CoNS"</span>, <span class="dt">language =</span> <span class="st">"de"</span>),</span>
<span id="cb7-12"><a href="#cb7-12"></a>                         <span class="dt">nl =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"CoNS"</span>, <span class="dt">language =</span> <span class="st">"nl"</span>),</span>
<span id="cb7-13"><a href="#cb7-13"></a>                         <span class="dt">es =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"CoNS"</span>, <span class="dt">language =</span> <span class="st">"es"</span>),</span>
<span id="cb7-14"><a href="#cb7-14"></a>                         <span class="dt">it =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"CoNS"</span>, <span class="dt">language =</span> <span class="st">"it"</span>),</span>
<span id="cb7-15"><a href="#cb7-15"></a>                         <span class="dt">fr =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"CoNS"</span>, <span class="dt">language =</span> <span class="st">"fr"</span>),</span>
<span id="cb7-16"><a href="#cb7-16"></a>                         <span class="dt">pt =</span> <span class="kw"><a href="../reference/mo_property.html">mo_name</a></span>(<span class="st">"CoNS"</span>, <span class="dt">language =</span> <span class="st">"pt"</span>),</span>
<span id="cb7-17"><a href="#cb7-17"></a>                         <span class="dt">times =</span> <span class="dv">100</span>)</span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(run_it, <span class="dt">unit =</span> <span class="st">"ms"</span>, <span class="dt">signif =</span> <span class="dv">4</span>)</span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co"># Unit: milliseconds</span></span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="co">#  expr   min    lq  mean median    uq    max neval</span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="co">#    en 23.72 25.30 30.59  25.77 26.99  76.03   100</span></span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="co">#    de 24.88 26.81 31.11  27.47 28.93  69.86   100</span></span>
<span id="cb7-23"><a href="#cb7-23"></a><span class="co">#    nl 30.65 32.77 38.07  33.70 35.23  74.79   100</span></span>
<span id="cb7-24"><a href="#cb7-24"></a><span class="co">#    es 24.89 26.33 32.10  27.13 28.87  68.79   100</span></span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="co">#    it 24.78 26.72 33.51  27.53 28.91 166.60   100</span></span>
<span id="cb7-26"><a href="#cb7-26"></a><span class="co">#    fr 24.84 26.58 31.50  27.13 28.29  67.38   100</span></span>
<span id="cb7-27"><a href="#cb7-27"></a><span class="co">#    pt 24.88 26.58 32.38  27.50 29.20  79.30   100</span></span></code></pre></div>
<p>Currently supported are German, Dutch, Spanish, Italian, French and Portuguese.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://www.rug.nl/staff/m.s.berends/">Matthijs S. Berends</a>, <a href="https://www.rug.nl/staff/c.f.luz/">Christian F. Luz</a>, <a href="https://www.rug.nl/staff/a.w.friedrich/">Alexander W. Friedrich</a>, <a href="https://www.rug.nl/staff/b.sinha/">Bhanu N. M. Sinha</a>, <a href="https://www.rug.nl/staff/c.j.albers/">Casper J. Albers</a>, <a href="https://www.rug.nl/staff/c.glasner/">Corinna Glasner</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
